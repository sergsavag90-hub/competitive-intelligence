selenium_grid:
  provider: "browserless"  # browserless | selenium
  api_key: "${BROWSERLESS_API_KEY:-}"
  region: "eu-west-1"
  hub_url: http://192.168.1.172:4444/wd/hub  # fallback/local Grid
  browser: chrome
  headless: false
  mode: remote
  requests_fallback: false
  implicit_wait: 10
  page_load_timeout: 30
  screenshot_on_error: true
  max_concurrent: 50
  fallback_local_percent: 5  # % of sessions forced to local Grid

targets: []

modules:
  seo:
    enabled: true
    max_pages_to_crawl: 50
    max_crawl_depth: 3
    collect_meta_tags: true
    collect_headings: true
    collect_robots_txt: true
    collect_sitemap: true
    collect_structured_data: true
  company:
    enabled: true
    collect_emails: true
    collect_phones: true
    collect_addresses: true
    collect_social_media: true
  products:
    enabled: true
    max_products_per_site: 1000
    collect_prices: true
    collect_images: true
    collect_descriptions: true
  functional_test:
    enabled: true
  promotions:
    enabled: true
    keywords:
      - знижка
      - акція
      - розпродаж
      - sale
      - discount
      - promotion

database:
  type: postgres  # postgres | sqlite
  url: ${DATABASE_URL:-postgresql+asyncpg://user:password@localhost:5432/competitive_intel?pool_size=20}
  replica_url: ${DATABASE_REPLICA_URL:-}
  sqlite_path: data/competitive_intelligence.db
  backup_enabled: true
  backup_frequency: daily

redis:
  url: ${REDIS_URL:-redis://localhost:6379/0}
  cache_ttl_seconds: 3600
  enable_cache: true

ollama:
  enabled: false
  model: llama3.2
  host: http://localhost:11434
  temperature: 0.7
  analysis_types:
    - competitor_analysis
    - recommendations
    - trend_detection
    - pricing_strategy

web:
  host: 0.0.0.0
  port: 5000
  debug: false

export:
  formats:
    - json
    - excel
    - csv
  output_directory: exports/

scheduling:
  enabled: false
  full_scan_cron: 0 3 * * *
  quick_scan_cron: 0 */6 * * *

logging:
  level: INFO
  file: logs/intelligence.log
  console: true
  max_size_mb: 50
  backup_count: 5

scraping:
  parallel_workers: 3
  retry_attempts: 3
  retry_delay: 5
  user_agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36
  request_timeout: 30
  respect_robots_txt: true

notifications:
  enabled: false
  telegram:
    enabled: false
    bot_token: ""
    chat_id: ""
  email:
    enabled: false
    smtp_server: ""
    smtp_port: 587
    username: ""
    password: ""
    recipients: []

protection:
  captcha:
    provider: "2captcha"
    api_key: "${CAPTCHA_API_KEY}"
    timeout: 120
  proxy:
    provider: "brightdata"
    username: "${PROXY_USER}"
    password: "${PROXY_PASS}"
    rotation_interval: 5
    geo_targets:
      - "US"
      - "DE"
      - "PL"
  stealth:
    enabled: true
    user_agent_rotation: true

analytics:
  forecasting:
    enabled: true
    model: "prophet"
    retrain_interval: "7d"
  anomaly_detection:
    enabled: true
    contamination: 0.05
    alert_threshold: 0.8
  clustering:
    enabled: true
    n_clusters: 3
    run_schedule: "0 2 * * 0"
  auto_insights:
    enabled: true
    min_change_threshold: 0.20
    generate_report: "daily"
