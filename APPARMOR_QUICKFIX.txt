â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ðŸ”§ Ð¨Ð’Ð˜Ð”ÐšÐ• Ð’Ð˜ÐŸÐ ÐÐ’Ð›Ð•ÐÐÐ¯ APPARMOR ÐŸÐžÐœÐ˜Ð›ÐšÐ˜ Ð’ LXC
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ÐŸÐžÐœÐ˜Ð›ÐšÐ:
--------
runc run failed: unable to apply apparmor profile
write fsmount:fscontext:proc/thread-self/attr/apparmor/exec: 
no such file or directory

ÐŸÐ Ð˜Ð§Ð˜ÐÐ:
--------
Docker Ð½Ð°Ð¼Ð°Ð³Ð°Ñ”Ñ‚ÑŒÑÑ Ð²Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð¾Ð²ÑƒÐ²Ð°Ñ‚Ð¸ AppArmor Ð²ÑÐµÑ€ÐµÐ´Ð¸Ð½Ñ– LXC ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð°,
Ð´Ðµ AppArmor Ð½Ðµ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¸Ð¹.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Ð¨Ð’Ð˜Ð”ÐšÐ• Ð Ð†Ð¨Ð•ÐÐÐ¯ (Ð’Ð˜Ð‘Ð•Ð Ð†Ð¢Ð¬ ÐžÐ”Ð˜Ð Ð¡ÐŸÐžÐ¡Ð†Ð‘):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”Œâ”€ Ð¡ÐŸÐžÐ¡Ð†Ð‘ 1: ÐÐ’Ð¢ÐžÐœÐÐ¢Ð˜Ð§ÐÐ˜Ð™ (Ð Ð•ÐšÐžÐœÐ•ÐÐ”ÐžÐ’ÐÐÐž) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                â”‚
â”‚  Ð’ LXC ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ñ– Ð²Ð¸ÐºÐ¾Ð½Ð°Ð¹Ñ‚Ðµ:                                  â”‚
â”‚                                                                â”‚
â”‚  cd /opt/competitive-intelligence                             â”‚
â”‚  ./fix-docker-apparmor.sh                                     â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ Ð¡ÐŸÐžÐ¡Ð†Ð‘ 2: Ð Ð£Ð§ÐÐ˜Ð™ (Ð¯ÐšÐ©Ðž Ð¡ÐšÐ Ð˜ÐŸÐ¢ ÐÐ• ÐŸÐ ÐÐ¦Ð®Ð„) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                â”‚
â”‚  sudo mkdir -p /etc/docker                                    â”‚
â”‚  sudo tee /etc/docker/daemon.json > /dev/null <<'EOF'         â”‚
â”‚  {                                                             â”‚
â”‚    "storage-driver": "overlay2",                              â”‚
â”‚    "security-opts": [                                         â”‚
â”‚      "apparmor=unconfined"                                    â”‚
â”‚    ]                                                           â”‚
â”‚  }                                                             â”‚
â”‚  EOF                                                           â”‚
â”‚                                                                â”‚
â”‚  sudo systemctl restart docker                                â”‚
â”‚  docker run --rm hello-world                                  â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ÐŸÐ•Ð Ð•Ð’Ð†Ð ÐšÐ:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
docker info | grep -i security
# ÐœÐ°Ñ” Ð¿Ð¾ÐºÐ°Ð·Ð°Ñ‚Ð¸: Security Options: apparmor=unconfined

docker build -t test - <<< "FROM alpine:latest"
# ÐœÐ°Ñ” Ð·Ñ–Ð±Ñ€Ð°Ñ‚Ð¸ÑÑ Ð±ÐµÐ· Ð¿Ð¾Ð¼Ð¸Ð»Ð¾Ðº

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ÐŸÐ†Ð¡Ð›Ð¯ Ð’Ð˜ÐŸÐ ÐÐ’Ð›Ð•ÐÐÐ¯:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
cd /opt/competitive-intelligence
./deploy.sh

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Ð‘Ð•Ð—ÐŸÐ•ÐšÐ:
â”€â”€â”€â”€â”€â”€â”€â”€
âœ“ Ð¦Ðµ Ð±ÐµÐ·Ð¿ÐµÑ‡Ð½Ð¾ Ð´Ð»Ñ LXC ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ñ–Ð²
âœ“ Docker Ð²ÑÐµ Ñ‰Ðµ Ñ–Ð·Ð¾Ð»ÑŒÐ¾Ð²Ð°Ð½Ð¸Ð¹ Ñ‡ÐµÑ€ÐµÐ· namespaces, cgroups, seccomp
âœ“ LXC ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€ ÑÐ°Ð¼ Ð½Ð°Ð´Ð°Ñ” Ñ–Ð·Ð¾Ð»ÑÑ†Ñ–ÑŽ
âœ— ÐÐ• Ð²Ð¸Ð¼Ð¸ÐºÐ°Ð¹Ñ‚Ðµ AppArmor Ð½Ð° Ñ…Ð¾ÑÑ‚-ÑÐ¸ÑÑ‚ÐµÐ¼Ñ– Proxmox!

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Ð”Ð•Ð¢ÐÐ›Ð¬ÐÐ Ð”ÐžÐšÐ£ÐœÐ•ÐÐ¢ÐÐ¦Ð†Ð¯:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
- DOCKER_LXC_FIX.md - Ð¿Ð¾Ð²Ð½Ð° Ñ–Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ñ–Ñ
- PROXMOX_DEPLOYMENT.md - Ñ€Ð¾Ð·Ð´Ñ–Ð» "Ð£ÑÑƒÐ½ÐµÐ½Ð½Ñ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
